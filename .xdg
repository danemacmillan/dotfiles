# vim: ft=sh

##
# Create XDG environment variables and directories.
#
# This should follow the standard as closely as possible:
# - https://specifications.freedesktop.org/basedir-spec/basedir-spec-latest.html
#
# Note that on some operating systems, namely MacOS, the $TMPDIR environment
# variable has a trailing forward slash. This is corrected in an ephemeral
# environment variable before its possible use.
#
# @author Dane MacMillan <work@danemacmillan.com>
# @link https://github.com/danemacmillan/dotfiles
# @license MIT
export XDG_DATA_HOME="${XDG_DATA_HOME:-${HOME}/.local/share}"
export XDG_CONFIG_HOME="${XDG_CONFIG_HOME:-${HOME}/.config}"
export XDG_DATA_DIRS="${XDG_DATA_DIRS:-/usr/local/share/:/usr/share/}"
export XDG_CONFIG_DIRS="${XDG_CONFIG_DIRS:-/etc/xdg}"
export XDG_CACHE_HOME="${XDG_CACHE_HOME:-${HOME}/.cache}"
__tmpdir="${TMPDIR%/}"
export XDG_RUNTIME_DIR="${XDG_RUNTIME_DIR:-"${__tmpdir:-/tmp}/${USER}"}"
unset __tmpdir

[[ ! -e ${XDG_DATA_HOME} ]] && mkdir -p ${XDG_DATA_HOME}
[[ ! -e ${XDG_CONFIG_HOME} ]] && mkdir -p ${XDG_CONFIG_HOME}
[[ ! -e ${XDG_CACHE_HOME} ]] && mkdir -p ${XDG_CACHE_HOME}
[[ ! -e ${XDG_RUNTIME_DIR} ]] && mkdir -p ${XDG_RUNTIME_DIR} && chmod 700 ${XDG_RUNTIME_DIR}
