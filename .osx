## .osx

# Get homebrew and some niceties.
if test ! $(which brew); then
  echo "Installing homebrew..."
	ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"

	# Install some brew essentials
	brew update
	brew install bash bash-completion coreutils findutils

	# Tap some essentials
	brew tap caskroom/cask
	brew tap caskroom/fonts
	brew tap caskroom/versions
	brew tap homebrew/completions
	brew tap homebrew/dupes
	brew tap homebrew/versions
fi

# Exports

# Assumes that coreutils and other GNU tools have replaced OSX'
export PATH="$(brew --prefix coreutils)/libexec/gnubin:$PATH"
export MANPATH="$(brew --prefix coreutils)/libexec/gnuman:$MANPATH"
export PATH="/usr/local/opt/gnu-tar/libexec/gnubin:$PATH"

# Color
export CLICOLOR=1
export LSCOLORS=GxFxCxDxBxegedabagaced

# Aliases

# Depends on Firefox Tools Adapter: https://developer.mozilla.org/en-US/docs/Tools/Firefox_Tools_Adapter
# TODO: Add checking.
alias debugios='open /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/Applications/iPhone\ Simulator.app; sleep 2s; ios_webkit_debug_proxy'

alias show='defaults write com.apple.finder AppleShowAllFiles YES; killall Finder /System/Library/CoreServices/Finder.app'
alias hide='defaults write com.apple.finder AppleShowAllFiles NO; killall Finder /System/Library/CoreServices/Finder.app'
alias cleanup="find . -type f -name '*.DS_Store' -ls -delete"
alias stfu="osascript -e 'set volume output muted true'"
alias pumpitup="osascript -e 'set volume 7'"
alias afk="/System/Library/CoreServices/Menu\ Extras/User.menu/Contents/Resources/CGSession -suspend"
alias timer='echo "Timer started. Stop with Ctrl-D." && date && time cat && date'
alias emptytrash="sudo rm -rfv /Volumes/*/.Trashes; sudo rm -rfv ~/.Trash; sudo rm -rfv /private/var/log/asl/*.asl"
#alias flushdns="dscacheutil -flushcache && killall -HUP mDNSResponder"
alias flushdns="dscacheutil -flushcache"
alias update='sudo softwareupdate -i -a -v; brew doctor; brew update; brew upgrade; brew cleanup; npm install npm -g; npm update -g; sudo gem update --system; sudo gem update'

# Add tab completion for many Bash commands, including the
# ability to add extended Git info in PS1.
if which brew > /dev/null && [ -f "$(brew --prefix)/etc/bash_completion" ]; then
	source "$(brew --prefix)/etc/bash_completion";
fi;

# perlbrew
#source ~/perl5/perlbrew/etc/bashrc

# OSX settings
defaults write com.apple.Dock autohide-delay -float 0 && killall Dock

# Faster keyboard repeat rate
defaults write NSGlobalDomain KeyRepeat -int 0